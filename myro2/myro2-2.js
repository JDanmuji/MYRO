"use strict";function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null==arguments[i]?{}:arguments[i],ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_defineProperty(target,key,source[key])})}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}$(document).ready(function(){startTravelDate=new Date,startTravelDate.setDate(startTravelDate.getDate()+10),startTravelDateInModalCalander=startTravelDate,travelDay=3,travelDayInModalCalander=travelDay,$("#showingTravelDay").html(travelDay+"&nbsp"+"DAY"),$("#showingTravelDay3").html(travelDay),$("#travelDayForRouteMap").html(travelDay),$("#travelDay").val(travelDay),setEndTravelDateAfterSettingStartDateAndSetEDailyTimeSettingArea(startTravelDate),setDailyTimeSettingArea(startTravelDate,endTravelDate),changeSelectedHotelAreaWhenChangeDate();var menuactive=!1;$("#smartnav").click(function(){menuactive?($("#menu").animate({left:"-200"}),menuactive=!1):($("#menu").animate({left:0}),menuactive=!0)});var l=location.href;if(l.split("?")[1].split("&")[1]){var ll=l.split("?")[1].split("&")[1];"savedRouteToken"==ll.split("=")[0]&&(savedRouteToken=ll.split("=")[1],addUserTrackingData("savedRouteToken:"+savedRouteToken),savedRouteToken&&(userEmail?$.ajax({type:"GET",url:headAddress+"/verifyAuthority",data:{savedRouteToken:savedRouteToken,userEmail:userEmail},success:function success(res){200==res.statusCode&&("\uC5EC\uD589 \uC8FC\uC778"==res.msg||"\uC5EC\uD589 \uCE5C\uAD6C"==res.msg)?($("#saveRouteByExelBtnInBox").css("display","none"),$("#sendEmailBtnInBox").css("display","none"),$("#modifySavedRouteBtnInBox").css("display","flex"),$("#duplicateRouteBtnInBox").css("display","none"),$("#saveRouteBtnInBox").css("display","none"),$("#loginBtnInBox").css("display","none")):200==res.statusCode&&"\uC5EC\uD589 \uBC29\uBB38\uC790"==res.msg&&($("#saveRouteByExelBtnInBox").css("display","none"),$("#sendEmailBtnInBox").css("display","none"),$("#modifySavedRouteBtnInBox").css("display","none"),$("#duplicateRouteBtnInBox").css("display","flex"),$("#saveRouteBtnInBox").css("display","none"),$("#loginBtnInBox").css("display","none"))}}):(alert("\uB85C\uADF8\uC778\uC744 \uD558\uC154\uC57C \uC77C\uC815 \uC218\uC815\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4."),isNotLoginWithToken=!0,$("#saveRouteByExelBtnInBox").css("display","flex"),$("#sendEmailBtnInBox").css("display","none"),$("#modifySavedRouteBtnInBox").css("display","none"),$("#duplicateRouteBtnInBox").css("display","none"),$("#saveRouteBtnInBox").css("display","none"),$("#loginBtnInBox").css("display","flex"))),showLoading(),$.ajax({type:"GET",url:headAddress+"/getDataFromSavedRoute",data:{savedRouteToken:savedRouteToken},success:function success(data){var gestureHandlingType="cooperative";600<$(window).width()&&(gestureHandlingType=""),document.getElementById("routepage").style.display="block",map2=new google.maps.Map(document.getElementById("googleMapForRoute"),{zoom:11,center:{lat:startLat,lng:startLng},gestureHandling:gestureHandlingType}),dataFromServer=data,backupDataFromServer=_objectSpread2({},dataFromServer),backupDataFromSavedToken=_objectSpread2({},dataFromServer),delete backupDataFromSavedToken.spotsByDay,delete backupDataFromSavedToken.stayingInfos,delete backupDataFromSavedToken.originalSchedule;// console.log(dataFromServer)
// console.log('dataFromServer : ',dataFromServer);
// console.log('backupDataFromSavedToken : ',backupDataFromSavedToken);
// for (let i = 0; i < dataFromServer.spotsByDay.length; i++) {
//     let spots = dataFromServer.spotsByDay[i];
//     for (let j = 1; j < spots.length; j++) {
//         let spot = spots[j];
//         addSpotToSelectedSpotsWhenHaveToken(spot);
//     }
// }
// console.log(backupDataFromSavedToken.originalSpotsNo);
for(var i=0;i<backupDataFromSavedToken.originalSpotsNo.length;i++)addSpotToSelectedSpotsWhenHaveToken(backupDataFromSavedToken.originalSpotsNo[i]);startTravelDate=new Date(dataFromServer.startTravelDate),startTravelDateInModalCalander=dataFromServer.startTravelDateInModalCalander?new Date(dataFromServer.startTravelDateInModalCalander):startTravelDate;var startDateForHtmlValue=startTravelDateInModalCalander.getFullYear()+"."+("0"+(startTravelDateInModalCalander.getMonth()+1)).slice(-2)+"."+("0"+startTravelDateInModalCalander.getDate()).slice(-2);$("#calanderInModal").daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:startTravelDate.getFullYear()-10,maxYear:endTravelDate.getFullYear()+30,locale:{format:"YYYY.MM.DD"},startDate:startDateForHtmlValue},function(start){var startYear=start._d.getFullYear(),startMonth=("0"+(start._d.getMonth()+1)).slice(-2),startDay=("0"+start._d.getDate()).slice(-2);startTravelDateInModalCalander=start._d;var calanderTimeout=setTimeout(function(){// console.log(startDateForHtmlValue)
$("#calanderInModal").val(startYear+"."+startMonth+"."+startDay),clearTimeout(calanderTimeout),calanderTimeout=null},10);setMap(dataFromServer),modifyModeActivate(),openDailyTimesSettingArea(),totalTravelH=null,totalTravelM=null}),travelDay=dataFromServer.travelDay,travelDayInModalCalander=dataFromServer.spotsByDay.length-1,setEndTravelDateAfterSettingStartDateAndSetEDailyTimeSettingArea(startTravelDate),setDailyTimeSettingArea(startTravelDate),$("#showingTravelDay").html(travelDay+"&nbsp"+"DAY"),$("#showingTravelDay3").html(travelDay),$("#travelDayForRouteMap").html(travelDayInModalCalander),$("#travelDay").val(travelDay),changeSelectedHotelAreaWhenChangeDate(),setHotelsWhenHaveToken(),totalTravelMins=0;for(var _i=0;_i<dataFromServer.originalSchedule.length;_i++){var originalSchedule=dataFromServer.originalSchedule[_i],startTime=originalSchedule.startTime,endTime=originalSchedule.endTime,dailySpendingMins=getAbsoluteMinuteFromHHMM(endTime)-getAbsoluteMinuteFromHHMM(startTime);0>dailySpendingMins&&(dailySpendingMins+=1440),totalTravelMins+=dailySpendingMins;var startTimeForPresent=startTime.substr(0,2)+":"+startTime.substr(2,4),endTimeForPresent=endTime.substr(0,2)+":"+endTime.substr(2,4);$("input[name=\"dailyStartTimes\"]")[_i].value=startTimeForPresent,$("input[name=\"dailyEndTimes\"]")[_i].value=endTimeForPresent,originalSchedule=null,startTime=null,endTime=null,dailySpendingMins=null,startTimeForPresent=null,endTimeForPresent=null}var totalTravelH=Math.floor(totalTravelMins/60),totalTravelM=Math.floor(totalTravelMins%60);$("#totalTravelH").html(totalTravelH),$("#totalTravelM").html(totalTravelM),$(".myro2-multibtndiv-modal").css("left","360px"),$("#cart2NoList").css("display","none"),$("#getScheduleFileByExcelBtnT").css("display","block"),$("#copyRouteTokenBtnT").css("display","block"),$("#saveButton").css("display","none"),$("#modifyFixButton").css("display","block"),closePlanSideBar(),modifyModeDeActivate(),openPlanPageWidely=!1,setMap(dataFromServer),hideLoading(),totalTravelH=null,totalTravelM=null}}))}else//모바일에서 페이지 오픈 시 캘린더 버튼 클릭하여 달력 출력하기
userEmail?($("#saveRouteByExelBtnInBox").css("display","none"),$("#sendEmailBtnInBox").css("display","none"),$("#modifySavedRouteBtnInBox").css("display","none"),$("#duplicateRouteBtnInBox").css("display","none"),$("#saveRouteBtnInBox").css("display","flex"),$("#loginBtnInBox").css("display","none")):($("#saveRouteByExelBtnInBox").css("display","flex"),$("#sendEmailBtnInBox").css("display","flex"),$("#modifySavedRouteBtnInBox").css("display","none"),$("#duplicateRouteBtnInBox").css("display","none"),$("#saveRouteBtnInBox").css("display","flex"),$("#loginBtnInBox").css("display","none")),calander.click()});