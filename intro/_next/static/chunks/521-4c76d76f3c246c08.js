"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[521],{41921:function(e,n,t){t.d(n,{w:function(){return ed},Z:function(){return ef}});var r=t(37340),o=t(85893),i=t(19521),c=t(49432),a=t(89797),l=t(83151),s=t(53192),u=t(11163),d=t(47607),f=t(80129),h=t.n(f),g=t(17047),p=t(67294),x=t(84706),m=t(32521),w=t(73702),C=t(5152),b=t.n(C);function y(){let e=(0,r._)(["\n  transform: none !important;\n"]);return y=function(){return e},e}function v(){let e=(0,r._)(["\n  width: 100%;\n  height: 52px;\n  line-height: 26px;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  font-size: 16px;\n"]);return v=function(){return e},e}function j(){let e=(0,r._)(["\n  overflow-y: auto;\n"]);return j=function(){return e},e}let I="order-change.action-sheet",_=(0,i.default)(w.ActionSheet).withConfig({componentId:"sc-65193dd8-0"})(y()),k=(0,i.default)(c.Button).withConfig({componentId:"sc-65193dd8-1"})(v()),z=(0,i.default)(c.Container).withConfig({componentId:"sc-65193dd8-2"})(j());var F=(0,i.default)(z).withConfig({componentId:"sc-65193dd8-3"})({maxHeight:"calc(100vh - 310px)",padding:"10px 0 0"});let S=b()(()=>Promise.all([t.e(630),t.e(285),t.e(55)]).then(t.bind(t,90055)),{loadableGenerated:{webpack:()=>[90055]},ssr:!1});function E(){let e=(0,l.useUriHash)(),{back:n}=(0,l.useHistoryFunctions)(),{cities:t}=(0,m.M)();return(0,p.useEffect)(()=>{0===t.length&&n()},[t,n]),(0,o.jsxs)(_,{title:"순서 변경",open:e===I,onClose:n,bottomSpacing:52,children:[(0,o.jsx)(F,{position:"relative",children:(0,o.jsx)(S,{})}),(0,o.jsx)(k,{borderRadius:0,onClick:n,children:"완료"})]})}function N(){let e=(0,r._)(["\n  &:not(:last-of-type)::after {\n    background: url(",") no-repeat 0 0;\n    background-size: contain;\n    content: '';\n    width: 16px;\n    height: 16px;\n    margin-bottom: 28px;\n  }\n\n  &:first-child {\n    padding-left: 20px;\n  }\n\n  &:last-child {\n    scroll-margin-right: 6px;\n  }\n"]);return N=function(){return e},e}function R(){let e=(0,r._)(["\n  width: 36px;\n  height: 36px;\n  border-radius: 30px;\n  flex-shrink: 0;\n  margin-bottom: 10px;\n"]);return R=function(){return e},e}function T(){let e=(0,r._)(["\n  width: 28px;\n  height: 28px;\n  position: absolute;\n  padding: 0;\n  left: 18px;\n  top: -12px;\n  z-index: 5px;\n  background: url(",") no-repeat;\n  background-position: center;\n  background-color: transparent;\n  background-size: contain;\n"]);return T=function(){return e},e}function O(){let e=(0,r._)(["\n  max-width: 46px;\n  width: 46px;\n  height: 16px;\n  text-align: center;\n"]);return O=function(){return e},e}let A=(0,i.default)(c.FlexBox).withConfig({componentId:"sc-214da95b-0"})(N(),e=>{let{backgroundUrl:n}=e;return n});var B=(0,i.default)(A).withConfig({componentId:"sc-214da95b-1"})({padding:"9px 0 0"});let M=i.default.img.withConfig({componentId:"sc-214da95b-2"})(R()),U=(0,i.default)(c.Button).withConfig({componentId:"sc-214da95b-3"})(T(),e=>{let{backgroundUrl:n}=e;return n}),K=(0,i.default)(c.Text).withConfig({componentId:"sc-214da95b-4"})(O()),H=(0,p.forwardRef)((e,n)=>{let{city:t}=e,{handleDeleteCity:r}=(0,m.M)(),{basePath:i}=(0,u.useRouter)();return(0,o.jsx)(B,{position:"relative",flex:!0,alignItems:"center",gap:"8px",backgroundUrl:"".concat(i,"/static/icons/ico_step.svg"),ref:n,children:(0,o.jsxs)(c.FlexBox,{flex:!0,flexDirection:"column",alignItems:"center",children:[(0,o.jsxs)(q,{position:"relative",children:[(0,o.jsx)(U,{onClick:()=>{r(t.id)},backgroundUrl:"".concat(i,"/static/images/btn_delete@2x.png")}),(0,o.jsx)(M,{src:t.backgroundImageUrl||"".concat(i,"/static/images/ico-search-category-city@3x.png")})]}),(0,o.jsx)(K,{color:"gray500",ellipsis:!0,whiteSpace:"nowrap",size:"tiny",children:t.title})]})},t.id)});H.displayName="City";var q=(0,i.default)(c.Container).withConfig({componentId:"sc-214da95b-5"})({textAlign:"center",width:"36px"});function Z(){let e=(0,r._)(["\n  border-top: 1px solid var(--color-gray50);\n  z-index: 5;\n"]);return Z=function(){return e},e}function W(){let e=(0,r._)(["\n  width: 100%;\n  font-size: 14px;\n  padding-top: 16px;\n  padding-bottom: 16px;\n  background-color: ",";\n  color: ",";\n  opacity: 1;\n"]);return W=function(){return e},e}function D(){let e=(0,r._)(["\n  overflow: hidden;\n"]);return D=function(){return e},e}function G(){let e=(0,r._)(["\n  -ms-overflow-style: none;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  overflow-x: scroll;\n"]);return G=function(){return e},e}function L(){let e=(0,r._)(["\n  width: 36px;\n  height: 36px;\n  background: url(",") no-repeat;\n  background-position: center;\n  background-color: transparent;\n  padding: 0;\n  margin-top: 24px;\n"]);return L=function(){return e},e}function Q(){let e=(0,r._)(["\n  background: ",";\n"]);return Q=function(){return e},e}let P=(0,i.default)(c.Container).withConfig({componentId:"sc-4d7a3bf2-0"})(Z());var $=(0,i.default)(P).withConfig({componentId:"sc-4d7a3bf2-1"})({width:"100%"});let Y=(0,i.default)(c.Button).withConfig({componentId:"sc-4d7a3bf2-2"})(W(),e=>{let{disabled:n}=e;return n?"var(--color-gray50)":"var(--color-blue)"},e=>{let{disabled:n}=e;return n?"var(--color-gray300)":"white"}),V=(0,i.default)(c.FlexBox).withConfig({componentId:"sc-4d7a3bf2-3"})(D());var J=(0,i.default)(V).withConfig({componentId:"sc-4d7a3bf2-4"})({margin:"0 20px 0 0"});let X=(0,i.default)(c.FlexBox).withConfig({componentId:"sc-4d7a3bf2-5"})(G());var ee=(0,i.default)(X).withConfig({componentId:"sc-4d7a3bf2-6"})({marginRight:"10px",padding:"15px 5px 0 0"});let en=(0,i.default)(c.Button).withConfig({componentId:"sc-4d7a3bf2-7"})(L(),e=>{let{backgroundUrl:n}=e;return n}),et=(0,i.default)(c.Container).withConfig({componentId:"sc-4d7a3bf2-8"})(Q(),e=>{let{disabled:n}=e;return n?"linear-gradient(to bottom, rgba(255,255,255,0), white 14px)":"white"});var er=(0,i.default)(et).withConfig({componentId:"sc-4d7a3bf2-9"})({padding:"0 20px",width:"100%",bottom:0});function eo(e){let{tripId:n}=e,{cities:t}=(0,m.M)(),{push:r}=(0,l.useHistoryFunctions)(),i=(0,d.useNavigate)(),{trackEvent:c}=(0,l.useEventTrackingContext)(),{basePath:a,query:s}=(0,u.useRouter)(),f=(0,x.p)(s),w=(0,p.useRef)(null);return(0,p.useEffect)(()=>{var e;null===(e=w.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[t]),(0,o.jsxs)(o.Fragment,{children:[t.length>0?(0,o.jsx)($,{backgroundColor:"white",children:(0,o.jsxs)(J,{flex:!0,position:"relative",children:[(0,o.jsx)(ee,{flex:!0,gap:"6px",children:t.map((e,n)=>(0,o.jsx)(H,{city:e,ref:n===t.length-1?w:void 0},e.id))}),t.length>1?(0,o.jsx)(ei,{flex:!0,backgroundColor:"white",position:"sticky",children:(0,o.jsx)(en,{backgroundUrl:"".concat(a,"/static/icons/ico_change.svg"),onClick:()=>{c({fa:{category:"create"===f?"일정생성":"도시추가",action:"도시_순서변경"}}),r(I)}})}):null]})}):null,(0,o.jsx)(er,{position:"fixed",disabled:0===t.length,children:(0,o.jsx)(Y,{margin:{top:20,bottom:14},borderRadius:4,onClick:function(){if(0===t.length)return;c({fa:{category:"create"===f?"일정생성":"도시추가",action:"도시_선택완료",geotag_count:t.length,geotag_ids:t.map(e=>{let{id:n}=e;return n}).join(","),geotag_names:t.map(e=>{let{title:n}=e;return n}).join(",")}});let e=(0,g.generateUrl)({path:"/action/trip_destinations",query:h().stringify({trip_id:n,geotags:t.map(e=>"".concat(e.type,":").concat(e.id)).join(","),post_action:f})});i(e)},disabled:0===t.length,children:function(e){let n=e.length;return n>0?"".concat(e[0].title," ").concat(n>1?"외 ".concat(n-1,"개"):""," 선택 완료"):"최소 1개 도시 선택"}(t)})})]})}var ei=(0,i.default)(c.FlexBox).withConfig({componentId:"sc-4d7a3bf2-10"})({height:"100%",right:0,top:0});function ec(){let e=(0,r._)(["\n  overflow: hidden;\n"]);return ec=function(){return e},e}function ea(){let e=(0,r._)(["\n  flex-grow: 1;\n  overflow: hidden;\n  align-items: stretch;\n"]);return ea=function(){return e},e}let el=(0,i.default)(c.FlexBox).withConfig({componentId:"sc-f508f8a7-0"})(ec());var es=(0,i.default)(el).withConfig({componentId:"sc-f508f8a7-1"})(e=>({height:e.$_css}));let eu=(0,i.default)(c.FlexBox).withConfig({componentId:"sc-f508f8a7-2"})(ea()),ed="destinations.over_max";function ef(e){let{domesticRegions:n,overseasRegionCategories:t,domesticZone:r,tripId:i}=e,{cities:c}=(0,m.M)();return(0,o.jsxs)(es,{flex:!0,flexDirection:"column",$_css:0===c.length?"100vh":"calc(100vh - 82px)",children:[(0,o.jsx)(eu,{flex:!0,flexDirection:"column",alignItems:"flex-start",children:(0,o.jsx)(s.Z,{domesticRegions:n,overseasRegionCategories:t,domesticZone:r})}),(0,o.jsx)(eo,{tripId:i}),(0,o.jsx)(E,{}),(0,o.jsx)(eh,{})]})}function eh(){let e=(0,l.useUriHash)(),{back:n}=(0,l.useHistoryFunctions)();return(0,o.jsx)(a.Alert,{open:e===ed,onClose:n,onConfirm:n,children:(0,o.jsxs)(c.Text,{bold:!0,size:18,children:["최대 10개 도시까지",(0,o.jsx)("br",{}),"선택 가능합니다."]})})}},19067:function(e,n,t){t.d(n,{M:function(){return l},f:function(){return s}});var r=t(85893),o=t(67294),i=t(11163),c=t(83151);let a=(0,o.createContext)(null);function l(e){let{page:n,searchInputPlaceholder:t,tabValueOptions:o=["overseas","domestic"],hasOverseasZone:l=!1,onCityClick:s,children:u}=e,{push:d}=(0,i.useRouter)(),{trackEvent:f}=(0,c.useEventTrackingContext)(),h={intro:(e,n)=>{let{id:t,name:r}=n,o=!["overseas","domestic"].includes(t);o&&f({fa:{category:"라운지홈_메인",action:"도시검색_선택",region_id:t,region_name:r}}),d("/intro/".concat("41658134-233f-4b30-adad-ea58ace7c71b"===t?"domestic":t))}},g=n&&n in h?h[n]:void 0;return(0,r.jsx)(a.Provider,{value:{searchInputPlaceholder:t,tabValueOptions:o,hasOverseasZone:l,onCityClick:s||g},children:u})}function s(){let e=(0,o.useContext)(a);if(!e)throw Error("SearchOption context가 존재하지 않습니다.");return e}},32521:function(e,n,t){t.d(n,{M:function(){return s},o:function(){return l}});var r=t(85893),o=t(83151),i=t(67294),c=t(41921);let a=(0,i.createContext)({cities:[],handleAddCity:()=>{},handleDeleteCity:()=>{},isCitySelected:()=>!1,setCities:()=>{},disableMultiSelect:!1});function l(e){let{selectedCities:n=[],disableMultiSelect:t=!1,children:l}=e,{replace:s}=(0,o.useHistoryFunctions)(),[u,d]=(0,i.useState)(n);function f(e){return u.some(n=>n.id===e)}return(0,r.jsx)(a.Provider,{value:{cities:u,isCitySelected:f,handleAddCity:function(e){if(!f(e.id)){if(u.length>=10){s(c.w);return}d(n=>[...n,e])}},handleDeleteCity:function(e){if(f(e)){let n=u.findIndex(n=>n.id===e);d(e=>e.filter((e,t)=>n!==t))}},setCities:d,disableMultiSelect:t},children:l})}function s(){return(0,i.useContext)(a)}},39865:function(e,n,t){t.d(n,{Q:function(){return o},e:function(){return i}});var r=t(27734);let o={full:{url:"https://media.triple.guide/triple-cms/c_limit,f_auto,h_2048,w_2048/448c1260-3665-44f1-9d6b-6e38b590a1b0.jpeg"},large:{url:"https://media.triple.guide/triple-cms/c_limit,f_auto,h_1024,w_1024/448c1260-3665-44f1-9d6b-6e38b590a1b0.jpeg"},small_square:{url:"https://media.triple.guide/triple-cms/c_limit,f_auto,h_256,w_256/448c1260-3665-44f1-9d6b-6e38b590a1b0.jpeg"}},i={overseas:"/main",domestic:"/zones/".concat(r.TZ)}},84706:function(e,n,t){t.d(n,{p:function(){return o}});var r=t(17047);function o(e){let{post_action:n}=(0,r.strictQuery)(e).string("post_action").use();return n||"create"}},53192:function(e,n,t){t.d(n,{Z:function(){return eO}});var r,o,i=t(37340),c=t(85893),a=t(49432),l=t(83151),s=t(38553),u=t(55757),d=t(67294),f=t(19521),h=t(11163),g=t(92151),p=t(19067);function x(){let e=(0,i._)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: table;\n  background-color: white;\n"]);return x=function(){return e},e}function m(){let e=(0,i._)(["\n  display: block;\n  margin: auto;\n  width: 44px;\n  height: 44px;\n  opacity: 0.8;\n"]);return m=function(){return e},e}t(89797);let w=(0,f.default)(a.Container).withConfig({componentId:"sc-55ffe6a1-0"})(x()),C=f.default.img.withConfig({componentId:"sc-55ffe6a1-1"})(m());function b(){let{basePath:e}=(0,h.useRouter)();return(0,c.jsx)(w,{children:(0,c.jsxs)(y,{children:[(0,c.jsx)(C,{src:"".concat(e,"/static/images/ico_empty_search@4x.png"),alt:"ico_empty_search"}),(0,c.jsx)(a.Text,{size:18,bold:!0,center:!0,margin:{top:20},lineHeight:"22px",children:"검색 결과가 없습니다."}),(0,c.jsxs)(a.Text,{size:"small",alpha:.5,margin:{top:6},lineHeight:1.4,center:!0,whiteSpace:"pre",children:["도시, 국가 이름을 입력해보세요.",(0,c.jsx)("br",{}),"단어가 한글 혹은 영어로 정확한지 확인해보세요.",(0,c.jsx)("br",{})]})]})})}var y=(0,f.default)(a.Container).withConfig({componentId:"sc-55ffe6a1-2"})({marginTop:132});(r=o||(o={}))[r.AutoComplete=0]="AutoComplete",r[r.Search=1]="Search",r[r.EmptyKeyword=2]="EmptyKeyword",r[r.InputSearch=3]="InputSearch",r[r.Fetching=4]="Fetching",r[r.FetchingNext=5]="FetchingNext";let v={result:[],searchCategory:o.EmptyKeyword,keyword:"",pageIndex:0,hasNext:!0},j=(0,d.createContext)(v);function I(e){return e.filter(e=>{var n,t;return["NORMAL","NEW"].includes((null===(n=e.region)||void 0===n?void 0:n.state)||(null===(t=e.zone)||void 0===t?void 0:t.state)||"COMING_SOON")})}function _(e){return 40===e.length&&!!(e[e.length-1].region||e[e.length-1].zone)}function k(e){let n=e.reduce((e,n)=>{let t=n.region||n.zone;return t?{...e,[t.id]:n.representative?[n,...e[t.id]||[]]:[...e[t.id]||[],n]}:e},{}),t=Object.values(n).flatMap(e=>{let[n]=e;return n});return t}function z(e){let n=e.reduce((e,n)=>{var t;let{country:r}=n;return e[r.id]=null!==(t=e[r.id])&&void 0!==t?t:{id:r.id,names:r.names,cities:[]},e[r.id].cities.push(n),e},{});return Object.values(n)}let F=(e,n)=>{let{keyword:t,result:r,pageIndex:i,hasNext:c}=e;switch(n.search){case o.AutoComplete:return{result:z(k(I(n.result))),searchCategory:o.AutoComplete,keyword:t,pageIndex:0,hasNext:_(n.result)};case o.Search:return{result:z(k(I(n.result))),keyword:n.keyword,pageIndex:0,searchCategory:o.Search,hasNext:n.result&&_(n.result)};case o.EmptyKeyword:return{result:[],searchCategory:o.EmptyKeyword,keyword:"",pageIndex:0,hasNext:!0};case o.InputSearch:return{result:r,searchCategory:o.InputSearch,keyword:n.keyword,pageIndex:0,hasNext:c};case o.Fetching:return{...e,searchCategory:o.Fetching};case o.FetchingNext:{let e=I(n.result),c=function(e){let{prevResult:n,newCities:t}=e,r=n.flatMap(e=>e.cities),o=t.filter(e=>!r.find(n=>n.region&&e.region&&n.region.id===e.region.id||n.zone&&e.zone&&n.zone.id===e.zone.id));return o}({prevResult:r,newCities:k(e)}),a=function(e){let{prevResult:n,newCities:t}=e;if(n.length>0){let{countryUnexistedCities:e,countryExistedCities:r}=t.reduce((e,t)=>t.country.id===n[n.length-1].id?{...e,countryExistedCities:[...e.countryExistedCities,t]}:{...e,countryUnexistedCities:[...e.countryUnexistedCities,t]},{countryUnexistedCities:[],countryExistedCities:[]}),o=r.reduce((e,n)=>{let t=e.cities.find(e=>e.zone&&n.zone&&e.zone.id===n.zone.id||e.region&&n.region&&e.region.id===n.region.id);return t?e:{...e,cities:[...e.cities,n]}},n[n.length-1]);return[...n.slice(0,-1),o,...z(e)]}return z(t)}({prevResult:r,newCities:c});return{result:a,searchCategory:o.FetchingNext,pageIndex:i+1,keyword:t,hasNext:_(n.result)}}}};var S=(0,d.memo)(function(e){let{text:n,highlight:t,fontSize:r="large",highlightColor:o="blue",bold:i=!1,originalColor:l,originalAlpha:s,ellipsis:u=!1}=e;return(0,c.jsx)(a.Text,{size:r,bold:i,ellipsis:u,whiteSpace:u?"nowrap":"pre-line",children:t?n.split(t).map((e,n)=>(0,c.jsx)(d.Fragment,{children:n>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.Text,{color:o,size:r,whiteSpace:u?"nowrap":"pre-line",bold:i,inline:!0,children:t}),(0,c.jsx)(a.Text,{color:l,size:r,alpha:s,whiteSpace:u?"nowrap":"pre-line",bold:i,inline:!0,children:e})]}):(0,c.jsx)(a.Text,{color:l,inline:!0,size:r,alpha:s,whiteSpace:u?"nowrap":"pre-line",bold:i,children:e})},n)):(0,c.jsx)(c.Fragment,{children:n})})}),E=t(32521);function N(){let e=(0,i._)(["\n  width: 44px;\n  height: 44px;\n  border-radius: 30px;\n  flex-shrink: 0;\n"]);return N=function(){return e},e}function R(){let e=(0,i._)(["\n  flex-grow: 1;\n  overflow: 'hidden';\n  word-wrap: 'break-word';\n"]);return R=function(){return e},e}function T(){let e=(0,i._)(["\n  ::after {\n    content: ' \xb7 ';\n    color: var(--color-gray400);\n  }\n"]);return T=function(){return e},e}function O(){let e=(0,i._)(["\n  background-color: ",";\n  color: ",";\n  background-clip: padding-box;\n  border: 1px solid\n    ",";\n  height: 30px;\n  padding: 6px 14px 7px;\n  min-width: max-content;\n  font-size: 12px;\n  font-weight: 700;\n"]);return O=function(){return e},e}let A=f.default.img.withConfig({componentId:"sc-c6f3140f-0"})(N()),B=(0,f.default)(a.Container).withConfig({componentId:"sc-c6f3140f-1"})(R());var M=(0,f.default)(B).withConfig({componentId:"sc-c6f3140f-2"})({padding:"3px 0 0"});let U=(0,f.default)(a.Text).withConfig({componentId:"sc-c6f3140f-3"})(T()),K=(0,f.default)(a.Button).withConfig({componentId:"sc-c6f3140f-4"})(O(),e=>e.selected?"white":"var(--color-gray50)",e=>e.selected?"var(--color-blue)":"var(--color-gray)",e=>e.selected?"var(--color-blue)":"var(--color-gray50)"),H=(0,d.forwardRef)(function(e,n){let{id:t,type:r,title:o,detail:i,state:l,backgroundImageUrl:s,withHighlight:u=!1,onClick:f=()=>{}}=e,{keyword:g}=(0,d.useContext)(j),{basePath:p}=(0,h.useRouter)(),{isCitySelected:x,handleAddCity:m,handleDeleteCity:w,disableMultiSelect:C}=(0,E.M)(),b=x(t);return(0,c.jsxs)(W,{onClick:e=>{f(e,{id:t,name:o})},flex:!0,position:"relative",gap:"10px",ref:n,$_css:C?"pointer":"default",children:[(0,c.jsx)(A,{src:s||"".concat(p,"/static/images/ico-search-category-city@3x.png")}),(0,c.jsxs)(M,{children:[(0,c.jsx)(S,{text:o,highlight:g,fontSize:"large",ellipsis:!0}),(0,c.jsxs)(a.Text,{color:"gray",alpha:.4,children:[l&&"NORMAL"!==l?(0,c.jsx)(U,{size:"tiny",color:function(e){switch(e){case"NORMAL":return"gray";case"NEW":return"red";case"COMING_SOON":return"blue"}}(l),inline:!0,children:function(e){switch(e){case"NORMAL":return"";case"NEW":return"신규오픈";case"COMING_SOON":return"오픈예정"}}(l)}):null,(0,c.jsx)(q,{children:u?(0,c.jsx)(S,{text:i,highlight:g,fontSize:"tiny",originalColor:"gray",originalAlpha:.4}):(0,c.jsx)(a.Text,{size:"tiny",color:"gray",alpha:.4,children:i})})]})]}),C?null:(0,c.jsx)(Z,{flex:!0,alignItems:"center",children:(0,c.jsx)(K,{selected:b,onClick:()=>void(b?w(t):m({id:t,type:"triple-".concat(r),title:o,backgroundImageUrl:s})),children:b?"취소":"선택"})})]})});var q=(0,f.default)(a.Container).withConfig({componentId:"sc-c6f3140f-5"})({margin:"5px 0 3px",display:"inline-block"}),Z=(0,f.default)(a.FlexBox).withConfig({componentId:"sc-c6f3140f-6"})({height:"44px"}),W=(0,f.default)(a.FlexBox).withConfig({componentId:"sc-c6f3140f-7"})(e=>({minHeight:"44px",margin:"20px 0",cursor:e.$_css}));function D(e){let{text:n,preventHighlight:t=!1}=e,{keyword:r}=(0,d.useContext)(j);return(0,c.jsx)(a.Container,{children:(0,c.jsx)(G,{children:(0,c.jsx)(S,{text:n,highlight:t?void 0:r,fontSize:"small",bold:!0})})})}var G=(0,f.default)(a.Container).withConfig({componentId:"sc-96b204f0-0"})({padding:"30px 0 0"});function L(){let e=(0,i._)(["\n  overflow-y: auto;\n"]);return L=function(){return e},e}t(66337);let Q=(0,f.default)(a.Container).withConfig({componentId:"sc-71acf4ab-0"})(L());var P=(0,f.default)(Q).withConfig({componentId:"sc-71acf4ab-1"})({height:"calc(100% - 52px)",top:"52px",left:0,right:0});function $(e){let{result:n,onScrolledToBottom:t}=e,{keyword:r}=(0,d.useContext)(j),{onCityClick:o}=(0,p.f)(),{ref:i}=function(e,n){let t=(0,d.useRef)(null);return(0,d.useEffect)(()=>{if(!t.current)return;let r=new IntersectionObserver(function(n){let[t]=n;e(t.isIntersecting)},n);return r.observe(t.current),()=>r.disconnect()},[n,e]),{ref:t}}(t,{threshold:.5});return(0,c.jsx)(P,{backgroundColor:"white",children:(0,c.jsx)(V,{centered:!0,children:n.map((e,t)=>{let{id:a,names:{ko:l},cities:s}=e;return(0,c.jsxs)(Y,{children:[(0,c.jsx)(D,{text:l}),s.map((e,a)=>{let{names:{ko:l},id:u,region:d,zone:f}=e;return d||f?(0,c.jsx)(H,{ref:t===n.length-1&&a===s.length-1?i:void 0,id:d?d.id:f?f.id:"",type:d?"region":"zone",title:l||"",detail:(null==d?void 0:d.source.names.ko)||(null==f?void 0:f.source.names.ko)||"",backgroundImageUrl:(null==d?void 0:d.source.media.backgroundImage.sizes.small_square.url)||(null==f?void 0:f.source.media.backgroundImage.sizes.small_square.url),state:d?d.state:f?f.state:"COMING_SOON",onClick:o},"".concat(r,"_").concat(u,"_city")):null})]},"opened_".concat(a))})})})}var Y=(0,f.default)(a.Container).withConfig({componentId:"sc-71acf4ab-2"})({margin:"0 0 20px"}),V=(0,f.default)(a.Container).withConfig({componentId:"sc-71acf4ab-3"})({maxWidth:768,padding:"0 20px",margin:"0 auto 100px"}),J=t(17047);function X(){let e=(0,i._)(["\n  overflow-y: auto;\n"]);return X=function(){return e},e}let ee=(0,f.default)(a.Container).withConfig({componentId:"sc-ad3d173e-0"})(X());var en=(0,f.default)(ee).withConfig({componentId:"sc-ad3d173e-1"})({height:"calc(100% - 98px)",top:"98px",left:0,right:0});function et(e){let{regions:n,domesticZone:t}=e,{onCityClick:r}=(0,p.f)();return(0,c.jsx)(en,{backgroundColor:"white",children:(0,c.jsxs)(er,{centered:!0,children:[t?(0,c.jsx)(H,{id:t.id,type:"zone",title:t.source.names.ko,detail:"어디론가 떠나고 싶을 때",backgroundImageUrl:t.source.media.backgroundImage.sizes.small_square.url,onClick:r}):null,n.map(e=>{let{id:n,source:{names:{ko:t},featuredNames:o,media:{backgroundImage:{sizes:{small_square:{url:i}}}}}}=e;return(0,c.jsx)(H,{id:n,type:"region",title:t||"",detail:o.join(","),backgroundImageUrl:i,onClick:r},n)})]})})}var er=(0,f.default)(a.Container).withConfig({componentId:"sc-ad3d173e-2"})({maxWidth:768,padding:"10px 20px 182px"}),eo=t(13651),ei=t(84706),ec=t(39865);function ea(){let e=(0,i._)(["\n  overflow-y: auto;\n"]);return ea=function(){return e},e}let el=(0,f.default)(a.Container).withConfig({componentId:"sc-c3dde43c-0"})(ea());var es=(0,f.default)(el).withConfig({componentId:"sc-c3dde43c-1"})({height:"calc(100% - 153px)",top:"153px",left:0,right:0});function eu(e){let{regionCategories:n,filterId:t}=e,{onCityClick:r,hasOverseasZone:o}=(0,p.f)(),i=(0,d.useRef)(null);return(0,d.useEffect)(()=>{i.current&&(i.current.style.overflowY="hidden",i.current.scroll({top:0}),i.current.style.overflowY="scroll")},[i]),(0,c.jsx)(es,{backgroundColor:"white",ref:i,children:(0,c.jsxs)(ef,{centered:!0,children:[o?(0,c.jsx)(H,{id:"overseas",type:"zone",title:"해외 전체",detail:"해외 여행 추천 도시",backgroundImageUrl:ec.Q.small_square.url,onClick:r}):null,n.map(e=>{let{id:n,name:t,regions:o}=e;return o.length>0?(0,c.jsxs)(ed,{children:[(0,c.jsx)(D,{text:t||""}),o.map(e=>{let{id:n,source:{names:{ko:t},featuredNames:o,media:{backgroundImage:{sizes:{small_square:{url:i}}}}}}=e;return(0,c.jsx)(H,{id:n,type:"region",title:t||"",detail:o.join(","),backgroundImageUrl:i,onClick:r},n)})]},n):null})]})},t)}var ed=(0,f.default)(a.Container).withConfig({componentId:"sc-c3dde43c-2"})({margin:"0 0 20px"}),ef=(0,f.default)(a.Container).withConfig({componentId:"sc-c3dde43c-3"})({maxWidth:768,padding:"0 20px 182px"});function eh(){let e=(0,i._)(["\n  overflow: auto;\n  white-space: nowrap;\n  background-color: #fafafa;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n\n  z-index: 2;\n"]);return eh=function(){return e},e}function eg(){let e=(0,i._)(["\n  border-radius: 30px;\n  padding: 9px 10px;\n  box-shadow: 0 1px 0 rgba(58, 58, 58, 0.05);\n  border: 0;\n  color: black;\n  cursor: pointer;\n  margin-right: 8px;\n  background-color: ",";\n"]);return eg=function(){return e},e}let ep=(0,f.default)(a.Container).withConfig({componentId:"sc-172ca96e-0"})(eh());var ex=(0,f.default)(ep).withConfig({componentId:"sc-172ca96e-1"})({height:"55px",padding:"10px 20px",top:"98px"});let em=(0,f.default)(eo.Z.FilterEntry).withConfig({componentId:"sc-172ca96e-2"})(eg(),e=>{let{isSelected:n}=e;return n?"#368FFF":"white"});function ew(e){var n;let{regionCategories:t}=e,{query:r}=(0,h.useRouter)(),{country:o}=(0,J.strictQuery)(r).string("country").use(),[i,s]=(0,d.useState)(function(e,n){let t=e.find(e=>{let{id:t}=e;return t===n});return t?{...t,name:t.name||""}:null}(t,o)),{trackEvent:u}=(0,l.useEventTrackingContext)(),f=(0,ei.p)(r),g=i?t.filter(e=>{let{id:n}=e;return n===i.id}):t;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ex,{position:"sticky",children:[null,...t].map(e=>{let{id:n,name:t}=e||{id:null,name:"전체"},r=i?i.id===n:!e;return(0,c.jsx)(em,{onClick:()=>(function(e){let{id:n,name:t}=e;u({fa:{category:"create"===f?"일정생성":"도시추가",action:"필터_선택",filter_name:t||""}}),s(n?{id:n,name:t||""}:null)})({id:n,name:t}),isSelected:r,children:(0,c.jsx)(a.Text,{color:r?"white":void 0,size:13,children:t})},n||"show_all")})}),(0,c.jsx)(eu,{regionCategories:g,filterId:null!==(n=null==i?void 0:i.id)&&void 0!==n?n:"show_all"})]})}let eC={overseas:"해외도시",domestic:"국내도시",featured:"인기도시"};var eb=t(2172);function ey(){let e=(0,i._)(["\n  overflow-y: auto;\n"]);return ey=function(){return e},e}let ev=(0,f.default)(a.Container).withConfig({componentId:"sc-6f3289da-0"})(ey());var ej=(0,f.default)(ev).withConfig({componentId:"sc-6f3289da-1"})({height:"calc(100% - 98px)",top:"98px",left:0,right:0});function eI(){let[e,n]=(0,d.useState)([]),{onCityClick:t}=(0,p.f)(),r=async()=>{let e=await (0,eb.bm)();n(e)};return(0,d.useEffect)(()=>{r()},[]),(0,c.jsx)(ej,{backgroundColor:"white",children:(0,c.jsx)(e_,{centered:!0,children:e.map(e=>{let{id:n,source:{names:{ko:r},featuredNames:o,media:{backgroundImage:{sizes:{small_square:{url:i}}}}}}=e;return(0,c.jsx)(H,{id:n,type:"region",title:r||"",detail:o.join(","),backgroundImageUrl:i,onClick:t},n)})})})}var e_=(0,f.default)(a.Container).withConfig({componentId:"sc-6f3289da-2"})({maxWidth:768,padding:"10px 20px 100px"});function ek(){let e=(0,i._)(["\n  z-index: 4;\n  overflow: hidden;\n"]);return ek=function(){return e},e}let ez=(0,f.default)(a.Container).withConfig({componentId:"sc-266f208d-0"})(ek());var eF=(0,f.default)(ez).withConfig({componentId:"sc-266f208d-1"})({top:52,borderBottom:"1px solid var(--color-gray50)"});function eS(e){let{overseasRegionCategories:n,domesticRegions:t,domesticZone:r}=e,{query:o}=(0,h.useRouter)(),{tab:i}=(0,J.strictQuery)(o).string("tab").use(),{tabValueOptions:s}=(0,p.f)(),[u,f]=(0,d.useState)(i&&s.includes(i)?i:"overseas"),{trackEvent:g}=(0,l.useEventTrackingContext)(),x=(0,ei.p)(o),m=s.map(e=>({label:eC[e],value:e}));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(eF,{position:"sticky",backgroundColor:"white",children:(0,c.jsx)(a.Tabs,{value:u,variant:"pointing",onChange:e=>{if(e){var n;g({fa:{category:"create"===x?"일정생성":"도시추가",action:"카테고리_선택",tab_name:(null===(n=m.find(n=>{let{value:t}=n;return t===e}))||void 0===n?void 0:n.label)||""}}),f(e)}},children:(0,c.jsx)(eN,{children:m.map(e=>{let{value:n,label:t}=e;return(0,c.jsx)(eE,{value:n,children:t},n)})})})}),(()=>{switch(u){case"featured":return(0,c.jsx)(eI,{});case"overseas":return(0,c.jsx)(ew,{regionCategories:n});case"domestic":return(0,c.jsx)(et,{regions:t,domesticZone:r})}})()]})}var eE=(0,f.default)(a.Tab).withConfig({componentId:"sc-266f208d-2"})({padding:"13px 0",height:"46px"}),eN=(0,f.default)(a.TabList).withConfig({componentId:"sc-266f208d-3"})({borderBottom:"none"});function eR(){let e=(0,i._)(["\n  width: 100%;\n\n  input {\n    caret-color: var(--color-blue);\n  }\n"]);return eR=function(){return e},e}let eT=(0,f.default)(u.Z).withConfig({componentId:"sc-2f1b5bf8-0"})(eR());function eO(e){let{domesticRegions:n,overseasRegionCategories:t,domesticZone:r}=e,[i,u]=(0,d.useReducer)(F,v),{keyword:f,result:x,searchCategory:m,pageIndex:w,hasNext:C}=i,{push:y}=(0,l.useHistoryFunctions)(),{searchInputPlaceholder:I}=(0,p.f)(),{isReady:_}=(0,h.useRouter)(),k=x.length>0,[z,{loading:S}]=(0,g.nA)({onError:e=>{if(e)throw y("search.alert-error"),u({search:o.EmptyKeyword}),Error("Failed to fetch search query. Keyword:".concat(e.message))}});(0,d.useEffect)(()=>{S&&u({search:o.Fetching})},[S]);let E=async e=>{let{searchKeyword:n,next:t=!1,clearIndex:r=!1}=e;if(S)return u({search:o.Fetching}),[];try{let{data:e}=await z({variables:{keyword:n,page:r?0:t?w+1:w,size:40}});return((null==e?void 0:e.searchCities)||[]).map(e=>e)}catch(e){throw Error("".concat(e.message))}},N=async()=>{if(C){let e=await E({searchKeyword:f,next:!0});e&&u({search:o.FetchingNext,result:e})}},R=e=>{e?u({search:o.InputSearch,keyword:e}):u({search:o.EmptyKeyword})},T=async e=>{let n=e.trim();n&&u({search:o.AutoComplete,result:await E({searchKeyword:n})})},O=async e=>{let n=e.trim();n?u({search:o.Search,keyword:n,result:await E({searchKeyword:n,clearIndex:!0})}):u({search:o.EmptyKeyword})},A=()=>{u({search:o.EmptyKeyword})},B=()=>{(0,s.hasAccessibleTripleNativeClients)()?(0,s.backOrClose)():history.back()};return(0,c.jsxs)(j.Provider,{value:i,children:[(0,c.jsx)(eT,{zTier:2,placeholder:I||"여행, 어디로 떠나시나요?",onInputChange:R,onAutoComplete:T,onEnter:O,onBackClick:B,onDelete:A}),_&&!k?m===o.EmptyKeyword?(0,c.jsx)(eA,{domesticRegions:n,overseasRegionCategories:t,domesticZone:r}):(m===o.Search||m===o.AutoComplete)&&(0,c.jsx)(b,{}):null,i.searchCategory===o.Fetching?(0,c.jsx)(a.Spinner,{}):null,k?(0,c.jsx)($,{result:x,onScrolledToBottom:function(e){e&&m!==o.Fetching&&N()}}):null]})}function eA(e){let{domesticRegions:n,overseasRegionCategories:t,domesticZone:r}=e;return(0,c.jsx)(eS,{domesticRegions:n,overseasRegionCategories:t,domesticZone:r})}}}]);
