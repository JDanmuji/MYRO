"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}var gen=fn.apply(self,args);_next(void 0)})}}//장소 마커 누르거나 장소정보보기 누르면 나오는 모달 세팅
function spotInfoModal(_spotNo,_isFromMarker){document.getElementById("spotTipModal").parentNode.style.display="block",document.getElementById("spotRouteModal").parentNode.style.display="block",document.getElementById("spotAdmissionModal").parentNode.style.display="block",document.getElementById("spotFacModal").parentNode.style.display="none",_isFromMarker?$("#addSpotToCartModal").css("display","none"):($("#addSpotToCartModal").css("display","flex"),$("#addSpotToCartModal").attr("onclick","addSpotToSelectedSpots(".concat(_spotNo,");closeLocationInfoModal()")));//모달창 보이기
$("#showReviewBtn").attr("onclick","showReviewDiv(".concat(_spotNo,", 1)")),$("#showWriteReviewBtn").attr("onclick","showReviewWriteModal(".concat(_spotNo,")")),$("#locationInfo").css("display","flex"),$.ajax({type:"get",url:"/getSpotInfoForModal",data:{spotNo:_spotNo,cityName:cityName},success:function success(res){//showingName 에 괄호안에 영어 있는경우(있으면 너무 김) split으로 뒤에 지워버림.
var showingEngNameForModal,showingNameForModal=res.showingName;-1!==showingNameForModal.indexOf("(")&&(showingNameForModal=showingNameForModal.split(")")[0],showingEngNameForModal=showingNameForModal.split("(")[1],showingNameForModal=showingNameForModal.split("(")[0]);var openTimeForSpotInfoModal=JSON.parse(res.openTime),appendImageHtml="<img class=\"location-info-image\" \n            src=\"".concat(headAddress,"/getSpotImage/").concat(cityName,"?no=").concat(_spotNo,"\" \n            alt=\"placephoto\" \n            id=\"locationInfoImage\" \n            loading=\"lazy\" />")+"<div class=\"place-search-btn-container\">"+"<div class=\"place-search-btn-wrapper\">"+"<div class=\"place-search-btn\">"+"<div class=\"place-search-btn-image-container\""+" onclick=\"searchInWeb('google', '"+res.showingName.replace("'","\\'")+"', '"+res.lat+"', '"+res.lng+"')\">"+"<img src=\"myro_image/googlemaps_circle_btn.png\" alt=\"logo\" /></div></div>"+"<div class=\"place-search-btn\"><div class=\"place-search-btn-image-container\" onclick=\"searchInWeb('naver', '"+res.showingName.split("(")[0]+"')\"><img src=\"myro_image/naver_circle_btn.png\" alt=\"logo\" /></div></div>"+"<div class=\"place-search-btn\"><div class=\"place-search-btn-image-container\" onclick=\"searchInWeb('instagram', '"+res.showingName.split("(")[0].replace(/(\s*)/g,"")+"')\"><img src=\"myro_image/instagram_circle_btn.png\" alt=\"logo\" /></div></div>"+"</div></div>";$("#spotInfoImageModal").html(appendImageHtml),$("#spotInfoTitleModal").html(showingNameForModal);var openTimeAppendTextForModal="";if(0==openTimeForSpotInfoModal.length||"24/7"==openTimeForSpotInfoModal[0])for(var k=0;7>k;k++)openTimeAppendTextForModal+="<li>"+weekDayKor[k]+" : 00:00 ~ 24:00</li>";else{for(var openTimeByDay=[],_k=0;7>_k;_k++)openTimeByDay[_k]=[];for(var time,_k2=0;_k2<openTimeForSpotInfoModal.length;_k2++)time=openTimeForSpotInfoModal[_k2],openTimeByDay[time.o[0]].push(time),time=null;for(var _k3=0;7>_k3;_k3++){if(openTimeAppendTextForModal+="<li>"+weekDayKor[_k3]+" : ",0<openTimeByDay[_k3].length)for(var l=0;l<openTimeByDay[_k3].length;l++){var openTimeH=openTimeByDay[_k3][l].o[1].substr(0,2),openTimeM=openTimeByDay[_k3][l].o[1].substr(2,4),closeTimeH=openTimeByDay[_k3][l].c[1].substr(0,2),closeTimeM=openTimeByDay[_k3][l].c[1].substr(2,4);0<l&&(openTimeAppendTextForModal+="<span style='visibility:hidden '>\uD5AB : </span>"),openTimeAppendTextForModal+=openTimeH+":"+openTimeM+" ~ "+closeTimeH+":"+closeTimeM+"<br>",openTimeH=null,openTimeM=null,closeTimeH=null,closeTimeM=null}else openTimeAppendTextForModal+=i18nSvc.get("closed")}//end for k
openTimeByDay=null}$("#spotInfoOpenTimesModal").html(openTimeAppendTextForModal),$("#spotAddressModal").html(res.address),$("#spotAddressModal").attr("onclick","copyTxt(\"".concat(res.address,"\")")),$("#spotInfoEngTextModal").html(showingEngNameForModal),$("#spotHomePageModal").html(res.homePage),$("#spotHomePageModal").attr("onclick","copyTxt(\"".concat(res.homePage,"\")")),600>=$(window).width()&&res.phoneNumber?$("#spotPhoneNumModal").html("<a href='tel:".concat(res.phoneNumber,"'>").concat(res.phoneNumber,"<a>")):($("#spotPhoneNumModal").html(res.phoneNumber),$("#spotPhoneNumModal").attr("onclick","copyTxt(\"".concat(res.phoneNumber,"\")"))),$("#showReviewBtn > span").html("(".concat(res.review_cnt,")"));//장소 소개 너무 길면 자르기
var spotInfoText;// console.log(res);
res.spotInfoText&&(spotInfoText=50<res.spotInfoText.length?spotInfoText.substr(0,50):res.spotInfoText);$("#spotInfoIntroTextModal").html(spotInfoText),addUserTrackingData("spotInfoModal|"+cityName+_spotNo),showingNameForModal=null,showingEngNameForModal=null,openTimeForSpotInfoModal=null,appendImageHtml=null,openTimeAppendTextForModal=null,spotInfoText=null}})}//end spotInfoModal
function hotelInfoModal(_spotNo,_isFromMaker){document.getElementById("spotTipModal").parentNode.style.display="none",document.getElementById("spotRouteModal").parentNode.style.display="none",document.getElementById("spotAdmissionModal").parentNode.style.display="none",document.getElementById("spotFacModal").parentNode.style.display="block",_isFromMaker?$("#addSpotToCartModal").css("display","none"):($("#addSpotToCartModal").css("display","flex"),$("#addSpotToCartModal").attr("onclick","setHotel(".concat(_spotNo,");closeLocationInfoModal()")));//모달창 보이기
$("#showReviewBtn").attr("onclick","showReviewDiv(".concat(_spotNo,", 1)")),$("#showWriteReviewBtn").attr("onclick","showReviewWriteModal(".concat(_spotNo,")")),$("#locationInfo").css("display","flex"),$.ajax({type:"get",url:"/getSpotInfoForModal",data:{spotNo:_spotNo,cityName:cityName},success:function success(res){//showingName 에 괄호안에 영어 있는경우(있으면 너무 김) split으로 뒤에 지워버림.
var showingEngNameForModal,showingNameForModal=res.showingName;-1!==showingNameForModal.indexOf("(")&&(showingNameForModal=showingNameForModal.split(")")[0],showingEngNameForModal=showingNameForModal.split("(")[1],showingNameForModal=showingNameForModal.split("(")[0]);var openTimeForSpotInfoModal=JSON.parse(res.openTime),appendImageHtml="<img class=\"location-info-image\" \n            src=\"".concat(headAddress,"/getSpotImage/").concat(cityName,"?no=").concat(_spotNo,"\" \n            alt=\"placephoto\" \n            id=\"locationInfoImage\" \n            loading=\"lazy\" />")+"<div class=\"place-search-btn-container\">"+"<div class=\"place-search-btn-wrapper\">"+"<div class=\"place-search-btn\">"+"<div class=\"place-search-btn-image-container\""+" onclick=\"searchInWeb('google', '"+res.showingName.replace("'","\\'")+"', '"+res.lat+"', '"+res.lng+"')\">"+"<img src=\"myro_image/googlemaps_circle_btn.png\" alt=\"logo\" /></div></div>"+"<div class=\"place-search-btn\"><div class=\"place-search-btn-image-container\" onclick=\"searchInWeb('naver', '"+res.showingName.split("(")[0]+"')\"><img src=\"myro_image/naver_circle_btn.png\" alt=\"logo\" /></div></div>"+"<div class=\"place-search-btn\"><div class=\"place-search-btn-image-container\" onclick=\"searchInWeb('instagram', '"+res.showingName.split("(")[0].replace(/(\s*)/g,"")+"')\"><img src=\"myro_image/instagram_circle_btn.png\" alt=\"logo\" /></div></div>"+"</div></div>";// console.log(openTimeForSpotInfoModal);
$("#spotInfoImageModal").html(appendImageHtml),$("#spotInfoTitleModal").html(showingNameForModal);var openTimeAppendTextForModal="";if(0==openTimeForSpotInfoModal.length||"24/7"==openTimeForSpotInfoModal[0])for(var k=0;7>k;k++)openTimeAppendTextForModal+="<li>"+weekDayKor[k]+" : 00:00 ~ 24:00</li>";else{for(var openTimeByDay=[],_k4=0;7>_k4;_k4++)openTimeByDay[_k4]=[];for(var time,_k5=0;_k5<openTimeForSpotInfoModal.length;_k5++)time=openTimeForSpotInfoModal[_k5],openTimeByDay[time.o[0]].push(time),time=null;for(var _k6=0;7>_k6;_k6++){if(openTimeAppendTextForModal+="<li>"+weekDayKor[_k6]+" : ",0<openTimeByDay[_k6].length)for(var l=0;l<openTimeByDay[_k6].length;l++){var openTimeH=openTimeByDay[_k6][l].o[1].substr(0,2),openTimeM=openTimeByDay[_k6][l].o[1].substr(2,4),closeTimeH=openTimeByDay[_k6][l].c[1].substr(0,2),closeTimeM=openTimeByDay[_k6][l].c[1].substr(2,4);0<l&&(openTimeAppendTextForModal+="<span style='visibility:hidden '>\uD5AB : </span>"),openTimeAppendTextForModal+=openTimeH+":"+openTimeM+" ~ "+closeTimeH+":"+closeTimeM+"<br>",openTimeH=null,openTimeM=null,closeTimeH=null,closeTimeM=null}else openTimeAppendTextForModal+=i18nSvc.get("closed")}//end for k
openTimeByDay=null}// console.log(openTimeAppendTextForModal);
$("#spotInfoOpenTimesModal").html(openTimeAppendTextForModal),$("#spotAddressModal").html(res.address),$("#spotAddressModal").attr("onclick","copyTxt(\"".concat(res.address,"\")")),$("#spotInfoEngTextModal").html(showingEngNameForModal),$("#spotHomePageModal").html(res.homePage),$("#spotHomePageModal").attr("onclick","copyTxt(\"".concat(res.homePage,"\")")),600>=$(window).width()&&res.phoneNumber?$("#spotPhoneNumModal").html("<a href='tel:".concat(res.phoneNumber,"'>").concat(res.phoneNumber,"<a>")):($("#spotPhoneNumModal").html(res.phoneNumber),$("#spotPhoneNumModal").attr("onclick","copyTxt(\"".concat(res.phoneNumber,"\")"))),$("#showReviewBtn > span").html("(".concat(res.review_cnt,")")),addUserTrackingData("hotelInfoModal|"+cityName+_spotNo),showingNameForModal=null,showingEngNameForModal=null,openTimeForSpotInfoModal=null,appendImageHtml=null,openTimeAppendTextForModal=null}})}//end hotelInfoModal
//장소 정보 모달 끄기 누르면 안보이게하기
function closeLocationInfoModal(){$("#spotReviewsWrapper").html(""),hideReviewDiv(),document.getElementById("locationInfo").style.display="none",$("#spotInfoTitleModal").html("-"),$("#spotInfoEngTextModal").html("-"),$("#spotInfoIntroTextModal").html("-"),$("#spotTimeTableInfoModal").html("-"),$("#spotHomePageModal").html("-"),$("#spotAddressModal").html("-"),$("#spotPhoneNumModal").html("-"),$("#spotAdmissionModal").html("-"),$("#spotRouteModal").html("-"),$("#spotTipModal").html("-"),addUserTrackingData("closeLocationInfoModal|")}//end closeLocationInfoModal
//현재페이지, 기본값은 1페이지
var spotReviewCurrentPage=1,spotReviewDataPerPage=5,spotReviewPageGroup=5,spotReviewPageNum=0,allpageCnt=0;//페이지당 리뷰의 갯수
function getSpotReviewNextPage(_np,_spotNo){if("n"==_np){var pageNumForNP=spotReviewCurrentPage+1;// console.log(pageNumForNP);
if(pageNumForNP>allpageCnt)return void alert("\uB9C8\uC9C0\uB9C9 \uD398\uC774\uC9C0 \uC785\uB2C8\uB2E4.");var appendPageHtml="";// console.log(7777,spotReviewCurrentPage);
if(0==spotReviewCurrentPage%spotReviewPageGroup){for(var i=pageNumForNP;i<pageNumForNP+spotReviewPageGroup&&(appendPageHtml+="<a onclick=\"getReviewForSpotPage(".concat(_spotNo,",").concat(i,")\" id=\"pageButton").concat(i,"\" class=\"s-button\"> ").concat(i," </a>"),i!=spotReviewPageNum);i++);$("#reviewForSpotPage").html(appendPageHtml)}getReviewForSpotPage(_spotNo,pageNumForNP),pageNumForNP=null,appendPageHtml=null}else{var _pageNumForNP=spotReviewCurrentPage-1;if(1>_pageNumForNP)return void alert("\uCCAB \uD398\uC774\uC9C0 \uC785\uB2C8\uB2E4.");var _appendPageHtml="";// console.log(6666,spotReviewCurrentPage);
if(0==(spotReviewCurrentPage-1)%spotReviewPageGroup){for(var _i=_pageNumForNP-spotReviewPageGroup+1;_i<_pageNumForNP+1&&(_appendPageHtml+="<a onclick=\"getReviewForSpotPage(".concat(_spotNo,",").concat(_i,")\" id=\"pageButton").concat(_i,"\" class=\"s-button\"> ").concat(_i," </a>"),_i!=spotReviewPageNum);_i++);$("#reviewForSpotPage").html(_appendPageHtml)}getReviewForSpotPage(_spotNo,_pageNumForNP),_pageNumForNP=null,_appendPageHtml=null}//end if np
}//end getSpotReviewNextPage
function getReviewForSpotPage(){return _getReviewForSpotPage.apply(this,arguments)}function _getReviewForSpotPage(){return _getReviewForSpotPage=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(_spotNo,_pageNum){var pageForReviewData,getSpotReviewRes,appendHtml,i,appendBestReviewHtml,getSpotInfoBestReviewRes,_i2;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:pageForReviewData=(_pageNum-1)*spotReviewDataPerPage,0!=pageForReviewData&&--pageForReviewData;;return _context.next=5,myroRequestForAuth("".concat(headAddress,"/getSpotInfoReviewForModal"),"GET",{spotNo:_spotNo,cityName:cityName,pageForReviewData:pageForReviewData,spotReviewDataPerPage:spotReviewDataPerPage});case 5:if(getSpotReviewRes=_context.sent,appendHtml="",200!=getSpotReviewRes.statusCode){_context.next=25;break}if(0==getSpotReviewRes.spotReviewsData.length){_context.next=22;break}for($("#spotReviewsWrapper").html(""),i=0;i<getSpotReviewRes.spotReviewsData.length;i++)//리뷰 하나씩 불러오는 함수, 함수로 만든 이유는 리뷰작성했을때 append시키기 위해서.
appendHtml=appendReviewBox(getSpotReviewRes.spotReviewsData[i]),$("#spotReviewsWrapper").append(appendHtml);//end for getSpotReviewRes.spotReviewsData.length i
if(1!=_pageNum){_context.next=20;break}return appendBestReviewHtml="",_context.next=15,myroRequestForAuth("".concat(headAddress,"/getSpotInfoBestReviewForModal"),"GET",{spotNo:_spotNo,cityName:cityName,pageForReviewData:pageForReviewData,spotReviewDataPerPage:spotReviewDataPerPage});case 15://end getSpotInfoBestReviewRes
if(getSpotInfoBestReviewRes=_context.sent,200==getSpotInfoBestReviewRes.statusCode){for(_i2=0;_i2<getSpotInfoBestReviewRes.spotBestReviewsData.length;_i2++)//리뷰 하나씩 불러오는 함수, 함수로 만든 이유는 리뷰작성했을때 append시키기 위해서.
appendBestReviewHtml+=appendReviewBox(getSpotInfoBestReviewRes.spotBestReviewsData[_i2],!0);$("#spotReviewsWrapper").prepend(appendBestReviewHtml)};//end if 200
appendBestReviewHtml=null,getSpotInfoBestReviewRes=null;case 20:_context.next=24;break;case 22:appendHtml="<div id=\"spotReviewIsEmpty\" class=\"info-list-comment-empty-container\">\n                                <div class=\"info-list-comment-empty-text\">\uB9AC\uBDF0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uC791\uC131\uD574 \uC8FC\uC138\uC694.</div>\n                            </div>",$("#spotReviewsWrapper").html(appendHtml);case 24:spotReviewCurrentPage=_pageNum;case 25:;//end if 200
addUserTrackingData("showReviewDiv|".concat(cityName).concat(_spotNo,"|pageForReviewData")),pageForReviewData=null,getSpotReviewRes=null,appendHtml=null;case 30:case"end":return _context.stop();}},_callee)})),_getReviewForSpotPage.apply(this,arguments)}//end getReviewForSpotPage
// 리뷰보기 열기/닫기
function showReviewDiv(){return _showReviewDiv.apply(this,arguments)}function _showReviewDiv(){return _showReviewDiv=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee2(_spotNo,_pageNum){var pageForReviewData,getSpotInfoReviewRes,appendHtml,i,getSpotInfoBestReviewRes,appendBestReviewHtml,_i3;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:spotReviewCurrentPage=1,$.ajax({type:"get",url:"/getSpotInfoReviewCountForModal",data:{spotNo:_spotNo,cityName:cityName},success:function success(res){var reviewCnt=res.reviewCnt;// $("#reviewForSpotPage")
spotReviewPageNum=Math.ceil(reviewCnt/spotReviewDataPerPage),allpageCnt=Math.ceil(reviewCnt/spotReviewDataPerPage),0==spotReviewPageNum&&(spotReviewPageNum=1);for(var appendPageHtml="",i=1;i<spotReviewPageGroup+1&&(appendPageHtml+="<a onclick=\"getReviewForSpotPage(".concat(_spotNo,",").concat(i,")\" id=\"pageButton").concat(i,"\" class=\"s-button\"> ").concat(i," </a>"),i!=spotReviewPageNum);i++);$("#reviewForSpotPage").html(appendPageHtml),$("#travelListP").attr("onclick","getSpotReviewNextPage('p', ".concat(_spotNo,")")),$("#travelListN").attr("onclick","getSpotReviewNextPage('n', ".concat(_spotNo,")")),reviewCnt=null,appendPageHtml=null}//end success ajax
}),document.getElementById("info-review-div").style.display="block",pageForReviewData=(_pageNum-1)*spotReviewDataPerPage,0!=pageForReviewData&&--pageForReviewData;;return _context2.next=8,myroRequestForAuth("".concat(headAddress,"/getSpotInfoReviewForModal"),"GET",{spotNo:_spotNo,cityName:cityName,pageForReviewData:pageForReviewData,spotReviewDataPerPage:spotReviewDataPerPage});case 8:if(getSpotInfoReviewRes=_context2.sent,appendHtml="",200!=getSpotInfoReviewRes.statusCode){_context2.next=26;break}if(0==getSpotInfoReviewRes.spotReviewsData.length){_context2.next=24;break}for($("#spotReviewsWrapper").html(""),i=0;i<getSpotInfoReviewRes.spotReviewsData.length;i++)//리뷰 하나씩 불러오는 함수, 함수로 만든 이유는 리뷰작성했을때 append시키기 위해서.
appendHtml=appendReviewBox(getSpotInfoReviewRes.spotReviewsData[i]),$("#spotReviewsWrapper").append(appendHtml);//end for getSpotInfoReviewRes.spotReviewsData.length i
return _context2.next=16,myroRequestForAuth("".concat(headAddress,"/getSpotInfoBestReviewForModal"),"GET",{spotNo:_spotNo,cityName:cityName,pageForReviewData:pageForReviewData,spotReviewDataPerPage:spotReviewDataPerPage});case 16:if(getSpotInfoBestReviewRes=_context2.sent,appendBestReviewHtml="",200==getSpotInfoBestReviewRes.statusCode){for(_i3=0;_i3<getSpotInfoBestReviewRes.spotBestReviewsData.length;_i3++)//리뷰 하나씩 불러오는 함수, 함수로 만든 이유는 리뷰작성했을때 append시키기 위해서.
appendBestReviewHtml+=appendReviewBox(getSpotInfoBestReviewRes.spotBestReviewsData[_i3],!0);$("#spotReviewsWrapper").prepend(appendBestReviewHtml)};//end if 200
getSpotInfoBestReviewRes=null,appendBestReviewHtml=null,_context2.next=26;break;case 24:appendHtml="<div id=\"spotReviewIsEmpty\" class=\"info-list-comment-empty-container\">\n                                <div class=\"info-list-comment-empty-text\">\uB9AC\uBDF0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uC791\uC131\uD574 \uC8FC\uC138\uC694.</div>\n                            </div>",$("#spotReviewsWrapper").html(appendHtml);case 26:;//end if 200
addUserTrackingData("showReviewDiv|".concat(cityName).concat(_spotNo)),pageForReviewData=null,getSpotInfoReviewRes=null,appendHtml=null;case 31:case"end":return _context2.stop();}},_callee2)})),_showReviewDiv.apply(this,arguments)}//end showReviewDiv
function appendReviewBox(_spotReviewsData,_isBest){var appendHtml,mbNickSubstr=_spotReviewsData.mb_nick.substr(0,1);appendHtml=_isBest?"\n                <div id='spotReviewBest_idx_".concat(_spotReviewsData.idx,"' class=\"info-list-comment-container\">"):"\n        <div id='spotReview_idx_".concat(_spotReviewsData.idx,"' class=\"info-list-comment-container\">"),appendHtml+="\n                <div class=\"info-list-avatar-container\">\n                    <div class=\"info-list-avatar\">\n                    <div style=\"font-size:10px;color:#fff;\">".concat(mbNickSubstr,"</div>\n                    </div>\n                </div>\n                <div class=\"info-list-comment-div\">\n                    <div class=\"info-list-user-container\">\n                        <div class=\"info-list-user-text\">").concat(_spotReviewsData.mb_nick,"</div>\n                        <div class=\"info-list-user-text\">(").concat(_spotReviewsData.updated_at.substr(0,10),")</div>\n                        <div class=\"info-list-user-action-container\">"),appendHtml+=1==_spotReviewsData.iclickedlike?"<div class=\"info-list-material-i-container\">\n                        <i class=\"material-icons info-list-material-i\" id=\"reviewThumbUpIcon_idx_".concat(_spotReviewsData.idx,"\" style=\"color: blue!important;\" data-idx='").concat(_spotReviewsData.idx,"' onclick='reviewLike(this)'>thumb_up</i>\n                        <span class=\"info-list-user-text\" id='reviewThumbUp_idx_").concat(_spotReviewsData.idx,"'>").concat(_spotReviewsData.likeit-1,"</span>\n                    </div>\n                    <div class=\"info-list-material-i-container\">\n                        <i class=\"material-icons info-list-material-i\" id=\"reviewThumbDownIcon_idx_").concat(_spotReviewsData.idx,"\" data-idx='").concat(_spotReviewsData.idx,"'onclick='reviewDislike(this)'>thumb_down</i>\n                        <span class=\"info-list-user-text\" id='reviewThumbDown_idx_").concat(_spotReviewsData.idx,"'>").concat(_spotReviewsData.dislikeiit,"</span>\n                    </div>"):1==_spotReviewsData.iclickeddislike?"<div class=\"info-list-material-i-container\">\n                        <i class=\"material-icons info-list-material-i\" id=\"reviewThumbUpIcon_idx_".concat(_spotReviewsData.idx,"\" data-idx='").concat(_spotReviewsData.idx,"'onclick='reviewLike(this)'>thumb_up</i>\n                        <span class=\"info-list-user-text\" id='reviewThumbUp_idx_").concat(_spotReviewsData.idx,"'>").concat(_spotReviewsData.likeit-1,"</span>\n                    </div>\n                    <div class=\"info-list-material-i-container\">\n                        <i class=\"material-icons info-list-material-i\" id=\"reviewThumbDownIcon_idx_").concat(_spotReviewsData.idx,"\" style=\"color: red!important;\" data-idx='").concat(_spotReviewsData.idx,"'onclick='reviewDislike(this)'>thumb_down</i>\n                        <span class=\"info-list-user-text\" id='reviewThumbDown_idx_").concat(_spotReviewsData.idx,"'>").concat(_spotReviewsData.dislikeiit,"</span>\n                    </div>"):"<div class=\"info-list-material-i-container\">\n                        <i class=\"material-icons info-list-material-i\" id=\"reviewThumbUpIcon_idx_".concat(_spotReviewsData.idx,"\" data-idx='").concat(_spotReviewsData.idx,"'onclick='reviewLike(this)'>thumb_up</i>\n                        <span class=\"info-list-user-text\" id='reviewThumbUp_idx_").concat(_spotReviewsData.idx,"'>").concat(_spotReviewsData.likeit-1,"</span>\n                    </div>\n                    <div class=\"info-list-material-i-container\">\n                        <i class=\"material-icons info-list-material-i\" id=\"reviewThumbDownIcon_idx_").concat(_spotReviewsData.idx,"\" data-idx='").concat(_spotReviewsData.idx,"'onclick='reviewDislike(this)'>thumb_down</i>\n                        <span class=\"info-list-user-text\" id='reviewThumbDown_idx_").concat(_spotReviewsData.idx,"'>").concat(_spotReviewsData.dislikeiit,"</span>\n                    </div>"),appendHtml+="<div class=\"info-list-material-i-container info-list-button-mobile\">\n                        <i class=\"material-icons info-list-material-i\">warning</i>\n                    </div>\n                    <div class=\"info-list-material-i-container info-list-button-mobile\">\n                        <i class=\"material-icons info-list-material-i\">edit</i>\n                    </div>\n                    <div class=\"info-list-material-i-container info-list-button-mobile\">\n                        <i class=\"material-icons info-list-material-i\">delete</i>\n                    </div>",appendHtml+=_isBest?"\n            <div class=\"info-list-button\" style=\"background-color:red\">best!</div>\n            <div class=\"info-list-button\" id=\"declareReview_idx_".concat(_spotReviewsData.idx,"\" onclick=\"setDeclareReview(").concat(_spotReviewsData.idx,")\">\uC2E0\uACE0</div>"):"\n            <div class=\"info-list-button\" id=\"declareReview_idx_".concat(_spotReviewsData.idx,"\" onclick=\"setDeclareReview(").concat(_spotReviewsData.idx,")\">\uC2E0\uACE0</div>"),_spotReviewsData.mb_id==userEmail&&(_isBest?appendHtml+="\n                            <div data-review=\"".concat(_spotReviewsData.review_txt,"\" data-idx=\"").concat(_spotReviewsData.idx,"\" class=\"info-list-button\" id='spotReviewUpdateBest_idx_").concat(_spotReviewsData.idx,"' onclick=\"updateReviewModal(this)\">\uC218\uC815</div>\n                            <div data-idx=\"").concat(_spotReviewsData.idx,"\" class=\"info-list-button\" id='spotReviewDeleteBest_idx_").concat(_spotReviewsData.idx,"' onclick=\"deleteReviewModal(this)\">\uC0AD\uC81C</div>"):appendHtml+="\n                        <div data-review=\"".concat(_spotReviewsData.review_txt,"\" data-idx=\"").concat(_spotReviewsData.idx,"\" class=\"info-list-button\" id='spotReviewUpdate_idx_").concat(_spotReviewsData.idx,"' onclick=\"updateReviewModal(this)\">\uC218\uC815</div>\n                        <div data-idx=\"").concat(_spotReviewsData.idx,"\" class=\"info-list-button\" id='spotReviewDelete_idx_").concat(_spotReviewsData.idx,"' onclick=\"deleteReviewModal(this)\">\uC0AD\uC81C</div>"));//리뷰 글자 수 50 넘으면 
var reviewText;return reviewText=50<_spotReviewsData.review_txt.length?_spotReviewsData.review_txt.substr(0,100)+"<br>"+_spotReviewsData.review_txt.substr(100,_spotReviewsData.review_txt.length):_spotReviewsData.review_txt,appendHtml+=_isBest?"\n                </div>\n            </div>\n            <div class=\"info-list-message-container\" id=\"spotReviewtextBest_idx_".concat(_spotReviewsData.idx,"\">").concat(reviewText,"</div>\n        </div>\n    </div>\n    "):"\n                </div>\n            </div>\n            <div class=\"info-list-message-container\" id=\"spotReviewtext_idx_".concat(_spotReviewsData.idx,"\">").concat(reviewText,"</div>\n        </div>\n    </div>\n    "),mbNickSubstr=null,reviewText=null,appendHtml}//end appendReviewBox
//리뷰수정버튼 모달 및 안에 내용
//this 로 받음
function updateReviewModal(param){if(!userEmail)return editModalFun(i18nSvc.get("reviewModalForLogin"),"openLoginPageForSaveRoute()",!1,"hideAlertModal()"),void addUserTrackingData("updateReviewModal|not login");// param.dataset.review = $("#reviewTextArea").val()
// $(this).setAttribute('data-review', $("#reviewTextArea").val());
$("#reviewTextArea").val(param.dataset.review),$("#writeReviewTxtForSpotInfoModal").text("\uB9AC\uBDF0 \uC791\uC131"),document.getElementById("reviewWriteModal").style.display="flex",$("#finishReviewBtn").attr("onclick","updateReviewForSpot(".concat(param.dataset.idx,")")),addUserTrackingData("updateReviewModal")}//end updateReviewModal
function updateReviewForSpot(){return _updateReviewForSpot.apply(this,arguments)}function _updateReviewForSpot(){return _updateReviewForSpot=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee3(_idx){var updateReviewForSpotRes;return regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!(1>$("#reviewTextArea").val().length||1>$("#reviewTextArea").val().trim().length)){_context3.next=4;break}return editModalFun(i18nSvc.get("shouldWriteReviewModal"),"hideAlertModal()",!0),addUserTrackingData("updateReviewForSpot|".concat(_idx," text is too short")),_context3.abrupt("return");case 4:return _context3.next=6,myroRequestForAuth("".concat(headAddress,"/updateReviewForSpot"),"PUT",{idx:_idx,reviewText:$("#reviewTextArea").val().replaceAll("'","\"")});case 6:if(updateReviewForSpotRes=_context3.sent,401!=updateReviewForSpotRes.statusCode||"\uB85C\uADF8\uC778\uC744 \uD574\uC57C\uD569\uB2C8\uB2E4."!=updateReviewForSpotRes.msg){_context3.next=13;break}return editModalFun(i18nSvc.get("updateReviewModalForLogin"),"openLoginPageForSaveRoute()",!1,"hideAlertModal()"),addUserTrackingData("updateReviewModal|".concat(_idx," not login")),_context3.abrupt("return");case 13:200==updateReviewForSpotRes.statusCode&&($("#spotReviewtext_idx_".concat(_idx)).text($("#reviewTextArea").val()),document.getElementById("spotReviewUpdate_idx_".concat(_idx)).dataset.review=$("#reviewTextArea").val(),document.getElementById("spotReviewtextBest_idx_".concat(_idx))&&($("#spotReviewtextBest_idx_".concat(_idx)).text($("#reviewTextArea").val()),document.getElementById("spotReviewUpdateBest_idx_".concat(_idx)).dataset.review=$("#reviewTextArea").val()),$("#reviewTextArea").val(""),addUserTrackingData("updateReviewModal|".concat(_idx," success")));case 14:document.getElementById("reviewWriteModal").style.display="none",updateReviewForSpotRes=null;case 16:case"end":return _context3.stop();}},_callee3)})),_updateReviewForSpot.apply(this,arguments)}//end updateReviewForSpot
//리뷰 삭제버튼
//this 로 받음
function deleteReviewModal(param){return userEmail?void editModalFun(i18nSvc.get("deleteReviewModal"),"deleteReviewForSpot(".concat(param.dataset.idx,")"),!1,"hideAlertModal()"):(editModalFun(i18nSvc.get("deleteReviewModalForLogin"),"openLoginPageForSaveRoute()",!1,"hideAlertModal()"),void addUserTrackingData("deleteReviewModal|not login"))}//end deleteReviewModal
function deleteReviewForSpot(){return _deleteReviewForSpot.apply(this,arguments)}function _deleteReviewForSpot(){return _deleteReviewForSpot=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee4(_idx){var deleteReviewForSpotRes,noReviewAppendHtml;return regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,myroRequestForAuth("".concat(headAddress,"/deleteReviewForSpot"),"DELETE",{idx:_idx});case 2:if(deleteReviewForSpotRes=_context4.sent,401!=deleteReviewForSpotRes.statusCode||"\uB85C\uADF8\uC778\uC744 \uD574\uC57C\uD569\uB2C8\uB2E4."!=deleteReviewForSpotRes.msg){_context4.next=9;break}return editModalFun(i18nSvc.get("deleteReviewModalForLogin"),"openLoginPageForSaveRoute()",!1,"hideAlertModal()"),addUserTrackingData("deleteReviewModal|".concat(_idx," not login")),_context4.abrupt("return");case 9:200==deleteReviewForSpotRes.statusCode&&($("#spotReview_idx_".concat(_idx)).remove(),document.getElementById("spotReviewBest_idx_".concat(_idx))&&$("#spotReviewBest_idx_".concat(_idx)).remove(),$("#showReviewBtn > span").html("("+(+$("#showReviewBtn > span").text().split("(")[1].split(")")[0]-1)+")"),0==document.getElementById("spotReviewsWrapper").children.length&&(noReviewAppendHtml="<div id=\"spotReviewIsEmpty\" class=\"info-list-comment-empty-container\">\n                                <div class=\"info-list-comment-empty-text\">\uB9AC\uBDF0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uC791\uC131\uD574 \uC8FC\uC138\uC694.</div>\n                            </div>",$("#spotReviewsWrapper").html(noReviewAppendHtml)),addUserTrackingData("deleteReviewModal|success"),hideAlertModal());case 10:deleteReviewForSpotRes=null;case 11:case"end":return _context4.stop();}},_callee4)})),_deleteReviewForSpot.apply(this,arguments)}//end deleteReviewForSpot
//리뷰 모달 끄기
function hideReviewDiv(){document.getElementById("info-review-div").style.display="none"}//end hideReviewDiv
//리뷰 적기.
function finishReviewForSpot(){return _finishReviewForSpot.apply(this,arguments)}function _finishReviewForSpot(){return _finishReviewForSpot=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee5(_spotNo){var finishReviewForSpotRes;return regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(userEmail){_context5.next=4;break}return editModalFun(i18nSvc.get("reviewModalForLogin"),"openLoginPageForSaveRoute()",!1,"hideAlertModal()"),addUserTrackingData("finishReviewForSpot|not login"),_context5.abrupt("return");case 4:;if(!(1>$("#reviewTextArea").val().length||1>$("#reviewTextArea").val().trim().length)){_context5.next=9;break}return editModalFun(i18nSvc.get("shouldWriteReviewModal"),"hideAlertModal()",!0),addUserTrackingData("finishReviewForSpot|".concat(_spotNo," text is too short")),_context5.abrupt("return");case 9:;return _context5.next=12,myroRequestForAuth("".concat(headAddress,"/finishReviewForSpot"),"POST",{spotNo:_spotNo,cityName:cityName,reviewText:$("#reviewTextArea").val().replaceAll("'","\"")});case 12:if(finishReviewForSpotRes=_context5.sent,401!=finishReviewForSpotRes.statusCode||"\uB85C\uADF8\uC778\uC744 \uD574\uC57C\uD569\uB2C8\uB2E4."!=finishReviewForSpotRes.msg){_context5.next=19;break}return editModalFun(i18nSvc.get("reviewModalForLogin"),"openLoginPageForSaveRoute()",!1,"hideAlertModal()"),addUserTrackingData("finishReviewForSpot|not login"),_context5.abrupt("return");case 19:200==finishReviewForSpotRes.statusCode&&(showReviewDiv(_spotNo,1),$("#showReviewBtn > span").html("("+(+$("#showReviewBtn > span").text().split("(")[1].split(")")[0]+1)+")"),$("#reviewTextArea").val(""),addUserTrackingData("finishReviewForSpot|".concat(_spotNo)));case 20:;hideReviewWriteModal(),finishReviewForSpotRes=null;case 23:case"end":return _context5.stop();}},_callee5)})),_finishReviewForSpot.apply(this,arguments)}//end finishReviewForSpot
//좋아요 싫어요 함수
function reviewLike(){return _reviewLike.apply(this,arguments)}function _reviewLike(){return _reviewLike=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee6(_param){var reviewLikeForSpotRes;return regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(userEmail){_context6.next=3;break}return editModalFun(i18nSvc.get("reviewLikeOrDislikeModal"),"openLoginPageForSaveRoute()",!1,"hideAlertModal()"),_context6.abrupt("return");case 3:return _context6.next=5,myroRequestForAuth("".concat(headAddress,"/reviewLikeForSpot"),"POST",{idx:_param.dataset.idx});case 5:if(reviewLikeForSpotRes=_context6.sent,401!=reviewLikeForSpotRes.statusCode||"\uB85C\uADF8\uC778\uC744 \uD574\uC57C\uD569\uB2C8\uB2E4."!=reviewLikeForSpotRes.msg){_context6.next=11;break}return editModalFun(i18nSvc.get("reviewLikeOrDislikeModal"),"openLoginPageForSaveRoute()",!1,"hideAlertModal()"),_context6.abrupt("return");case 11:200==reviewLikeForSpotRes.statusCode&&("\uC88B\uC544\uC694 \uC644\uB8CC."==reviewLikeForSpotRes.msg?($("#reviewThumbUp_idx_".concat(_param.dataset.idx)).html(+$("#reviewThumbUp_idx_".concat(_param.dataset.idx)).text()+1),$("#reviewThumbUpIcon_idx_".concat(_param.dataset.idx)).attr("style","color : blue!important")):"\uC88B\uC544\uC694 \uCDE8\uC18C \uC644\uB8CC."==reviewLikeForSpotRes.msg?($("#reviewThumbUp_idx_".concat(_param.dataset.idx)).html(+$("#reviewThumbUp_idx_".concat(_param.dataset.idx)).text()-1),$("#reviewThumbUpIcon_idx_".concat(_param.dataset.idx)).attr("style","color : white")):"\uC2EB\uC5B4\uC694\uB97C \uC88B\uC544\uC694 \uC644\uB8CC."==reviewLikeForSpotRes.msg&&($("#reviewThumbUp_idx_".concat(_param.dataset.idx)).html(+$("#reviewThumbUp_idx_".concat(_param.dataset.idx)).text()+1),$("#reviewThumbDown_idx_".concat(_param.dataset.idx)).html(+$("#reviewThumbDown_idx_".concat(_param.dataset.idx)).text()-1),$("#reviewThumbUpIcon_idx_".concat(_param.dataset.idx)).attr("style","color : blue!important"),$("#reviewThumbDownIcon_idx_".concat(_param.dataset.idx)).attr("style","color : white")));case 12:;//end if 200
reviewLikeForSpotRes=null;case 14:case"end":return _context6.stop();}},_callee6)})),_reviewLike.apply(this,arguments)}//end reviewLike
function reviewDislike(){return _reviewDislike.apply(this,arguments)}function _reviewDislike(){return _reviewDislike=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee7(_param){var reviewDislikeForSpotRes;return regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(userEmail){_context7.next=3;break}return editModalFun(i18nSvc.get("reviewLikeOrDislikeModal"),"openLoginPageForSaveRoute()",!1,"hideAlertModal()"),_context7.abrupt("return");case 3:;return _context7.next=6,myroRequestForAuth("".concat(headAddress,"/reviewDislikeForSpot"),"POST",{idx:_param.dataset.idx});case 6:if(reviewDislikeForSpotRes=_context7.sent,401!=reviewDislikeForSpotRes.statusCode||"\uB85C\uADF8\uC778\uC744 \uD574\uC57C\uD569\uB2C8\uB2E4."!=reviewDislikeForSpotRes.msg){_context7.next=12;break}return editModalFun(i18nSvc.get("reviewLikeOrDislikeModal"),"openLoginPageForSaveRoute()",!1,"hideAlertModal()"),_context7.abrupt("return");case 12:200==reviewDislikeForSpotRes.statusCode&&("\uC2EB\uC5B4\uC694 \uC644\uB8CC."==reviewDislikeForSpotRes.msg?($("#reviewThumbDown_idx_".concat(_param.dataset.idx)).html(+$("#reviewThumbDown_idx_".concat(_param.dataset.idx)).text()+1),$("#reviewThumbDownIcon_idx_".concat(_param.dataset.idx)).attr("style","color : red!important")):"\uC2EB\uC5B4\uC694 \uCDE8\uC18C \uC644\uB8CC."==reviewDislikeForSpotRes.msg?($("#reviewThumbDown_idx_".concat(_param.dataset.idx)).html(+$("#reviewThumbDown_idx_".concat(_param.dataset.idx)).text()-1),$("#reviewThumbDownIcon_idx_".concat(_param.dataset.idx)).attr("style","color : white")):"\uC88B\uC544\uC694\uB97C \uC2EB\uC5B4\uC694 \uC644\uB8CC."==reviewDislikeForSpotRes.msg&&($("#reviewThumbDown_idx_".concat(_param.dataset.idx)).html(+$("#reviewThumbDown_idx_".concat(_param.dataset.idx)).text()+1),$("#reviewThumbUp_idx_".concat(_param.dataset.idx)).html(+$("#reviewThumbUp_idx_".concat(_param.dataset.idx)).text()-1),$("#reviewThumbDownIcon_idx_".concat(_param.dataset.idx)).attr("style","color : red!important"),$("#reviewThumbUpIcon_idx_".concat(_param.dataset.idx)).attr("style","color : white")));case 13:;//end if statusCode==200
reviewDislikeForSpotRes=null;case 15:case"end":return _context7.stop();}},_callee7)})),_reviewDislike.apply(this,arguments)}//end reviewDislike
//리뷰 신고
function setDeclareReview(_idx){if(!userEmail)return void editModalFun(i18nSvc.get("loginBeforeDeclareReviewModal"),"openLoginPageForSaveRoute()",!1,"hideAlertModal()");// console.log(4545);
$("#reviewTextArea").val(""),$("#writeReviewTxtForSpotInfoModal").text("\uB9AC\uBDF0 \uC2E0\uACE0"),document.getElementById("reviewWriteModal").style.display="flex",$("#finishReviewBtn").attr("onclick","declareReviewForSpot(".concat(_idx,")"))}//end setDeclareReview
function declareReviewForSpot(){return _declareReviewForSpot.apply(this,arguments)}function _declareReviewForSpot(){return _declareReviewForSpot=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee8(_idx){var declareReviewForSpotRes;return regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.next=2,myroRequestForAuth("".concat(headAddress,"/declareReviewForSpot"),"GET",{idx:_idx,declareTxt:$("#reviewTextArea").val().replaceAll("'","\""),declareReviewTxt:$("#spotReviewtext_idx_".concat(_idx)).text()});case 2:if(declareReviewForSpotRes=_context8.sent,401!=declareReviewForSpotRes.statusCode||"\uB85C\uADF8\uC778\uC744 \uD574\uC57C\uD569\uB2C8\uB2E4."!=declareReviewForSpotRes.msg){_context8.next=8;break}return editModalFun(i18nSvc.get("loginBeforeDeclareReviewModal"),"openLoginPageForSaveRoute()",!1,"hideAlertModal()"),_context8.abrupt("return");case 8:200==declareReviewForSpotRes.statusCode&&(editModalFun(declareReviewForSpotRes.msg,"hideAlertModal()",!0),$("#reviewTextArea").val(""),hideReviewWriteModal());case 9:declareReviewForSpotRes=null;case 10:case"end":return _context8.stop();}},_callee8)})),_declareReviewForSpot.apply(this,arguments)}//end declareReviewForSpot
//모달 내용 변경용 함수
function editModalFun(_txt,_onclick1,_oneBtnOrTwoBtn,_onclick2){var appendHtml="<div id=\"alertModal\" class=\"alert-modal\">\n        <div class=\"alert-modal-content\" style=\"padding-bottom: 10px\">\n            <p id=\"modalexitText\">\n                <span>".concat(_txt,"</span>\n            </p>\n            <div class=\"alert-button-container\">");appendHtml+="<div class=\"modal-close alert-button-ok\" onclick=".concat(_onclick1,">\uD655\uC778</div>"),_oneBtnOrTwoBtn||(appendHtml+="<div class=\"modal-close alert-button-close\" onclick=".concat(_onclick2,">\uCDE8\uC18C</div>")),appendHtml+="</div>\n        </div>\n        </div>\n    </div>",$("#modalResultArea").html(appendHtml),showAlertModal(),appendHtml=null}//end editModalFun
// 리뷰쓰기 열기/닫기
function showReviewWriteModal(_spotNo){return userEmail?void($("#writeReviewTxtForSpotInfoModal").text("\uB9AC\uBDF0 \uC791\uC131"),$("#reviewTextArea").val(""),document.getElementById("reviewWriteModal").style.display="flex",$("#finishReviewBtn").attr("onclick","finishReviewForSpot(".concat(_spotNo,")")),addUserTrackingData("showReviewWriteModal|".concat(_spotNo))):(editModalFun(i18nSvc.get("reviewModalForLogin"),"openLoginPageForSaveRoute()",!1,"hideAlertModal()"),void addUserTrackingData("showReviewWriteModal|not login"))}//end showReviewWriteModal
function hideReviewWriteModal(){document.getElementById("reviewWriteModal").style.display="none"}function copyTxt(_text){window.Clipboard=function(window,document,navigator){function isOS(){return navigator.userAgent.match(/ipad|iphone/i)}function createTextArea(text){textArea=document.createElement("textArea"),textArea.value=text,document.body.appendChild(textArea)}function selectText(){var range,selection;isOS()?(range=document.createRange(),range.selectNodeContents(textArea),selection=window.getSelection(),selection.removeAllRanges(),selection.addRange(range),textArea.setSelectionRange(0,999999)):textArea.select()}function copyToClipboard(){document.execCommand("copy"),document.body.removeChild(textArea)}var textArea,copy;return copy=function(text){createTextArea(text),selectText(),copyToClipboard()},{copy:copy}}(window,document,navigator),Clipboard.copy(_text)}